(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[29],{"0416":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"q-py-lg q-px-xl bg-grey-2 background-height"},[n("div",{staticClass:"row q-mb-xs"},[n("div",{staticClass:"title"},[e._v("TELEFONOS DE EMERGENCIA")]),"supervisor"!==e.user.type&&e.emergencyNumbers&&e.emergencyNumbers.length?n("InteractionOptions",{attrs:{selected:e.selected,createFunction:e.openCreateNew,editFunction:e.openUpdate,deleteFunction:e.openDelete}}):e._e()],1),n("q-separator"),e.loadingState?n("div",[n("q-spinner-tail",{staticClass:"absolute-center text-default",attrs:{size:"5em"}})],1):e.emergencyNumbers&&e.emergencyNumbers.length?n("TableView",{key:e.reRenderTable,attrs:{information:e.emergencyNumbers,columns:e.columns,visibleColumns:e.visibleColumns},on:{selection:function(t){e.selected=t}}}):n("div",{staticClass:"text-center"},[n("div",{staticClass:"empty-state normal-section empty-emergencyNumbers"}),n("h3",{staticClass:"empty-copy"},[e._v(" No hay registros aún.. ")]),"supervisor"!==e.user.type?n("q-btn",{staticClass:"text-capitalize",staticStyle:{height:"min-content"},attrs:{color:"positive",label:"PRIMER REGISTRO"},on:{click:e.openCreateNew}}):e._e()],1),n("q-dialog",{model:{value:e.alterEmergencyNumbers,callback:function(t){e.alterEmergencyNumbers=t},expression:"alterEmergencyNumbers"}},[n("q-card",{staticStyle:{width:"480px","max-width":"80vw"}},[e.gettingInfo?n("q-spinner-tail",{staticClass:"absolute-center text-default",attrs:{size:"3em"}}):e._e(),n("q-card-section",[n("div",{staticClass:"text-h6 text-bold"},[e._v("Telefono de emergencia")])]),n("q-card-section",[n("q-form",{on:{submit:e.alterRow,reset:e.reset}},[n("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n            Información principal:\n          ")]),n("div",{staticClass:"row"},[n("q-input",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",disable:e.gettingInfo,type:"number",min:0,label:"Telefono","stack-label":"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Por favor ingrese un telefono"},function(e){return e&&e.length<=10||"Numero incorrecto"}]},model:{value:e.emergencyNumberData.phone,callback:function(t){e.$set(e.emergencyNumberData,"phone",t)},expression:"emergencyNumberData.phone"}}),n("q-input",{staticClass:"ControlForm col",attrs:{filled:"",disable:e.gettingInfo,label:"Entidad","stack-label":"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Por favor ingrese una entidad"},function(e){return e&&e.length<=80||"Longitud maxima de 80 carácteres"}]},model:{value:e.emergencyNumberData.entity,callback:function(t){e.$set(e.emergencyNumberData,"entity",t)},expression:"emergencyNumberData.entity"}})],1),n("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n            Información Adicional:\n          ")]),n("div",{staticClass:"row"},[n("q-input",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",disable:e.gettingInfo,label:"Dirección","stack-label":"","lazy-rules":"",rules:[function(e){return!e||(e.length<=100||"Longitud maxima de 100 carácteres")}]},model:{value:e.emergencyNumberData.address,callback:function(t){e.$set(e.emergencyNumberData,"address",t)},expression:"emergencyNumberData.address"}}),n("q-input",{staticClass:"ControlForm",attrs:{filled:"",disable:e.gettingInfo,label:"Barrio","stack-label":"","lazy-rules":"",rules:[function(e){return!e||(e.length<=50||"Longitud maxima de 50 carácteres")}]},model:{value:e.emergencyNumberData.neighborhood,callback:function(t){e.$set(e.emergencyNumberData,"neighborhood",t)},expression:"emergencyNumberData.neighborhood"}})],1),n("div",{staticClass:"row"},[n("q-input",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",disable:e.gettingInfo,type:"number",min:0,label:"Otro telefono","stack-label":"","lazy-rules":"",rules:[function(e){return!e||(e.length<=10&&e>0||"Numero incorrecto")}]},model:{value:e.emergencyNumberData.otherNumber,callback:function(t){e.$set(e.emergencyNumberData,"otherNumber",t)},expression:"emergencyNumberData.otherNumber"}}),n("q-input",{staticClass:"ControlForm col",attrs:{filled:"",disable:e.gettingInfo,type:"number",min:0,label:"Extension","stack-label":"","lazy-rules":"",rules:[function(e){return!e||(e.length<=5&&e>0||"Extension incorrecta")}]},model:{value:e.emergencyNumberData.extension,callback:function(t){e.$set(e.emergencyNumberData,"extension",t)},expression:"emergencyNumberData.extension"}})],1),n("q-separator",{staticClass:"q-mb-sm"}),n("div",{attrs:{align:"center"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"negative",type:"reset",flat:"",label:"Cancelar",disable:e.loadingAlter}}),n("q-btn",{attrs:{color:"positive",type:"submit",flat:"",label:"Guardar",disable:e.gettingInfo,loading:e.loadingAlter}})],1)],1)],1)],1)],1)],1)},a=[],s=(n("456d"),n("8a81"),n("d25f"),n("9986"),n("8e6e"),n("9523")),i=n.n(s),o=n("c973"),c=n.n(o),l=(n("7514"),n("a34a")),u=n.n(l),m=n("333e"),b=n("e802"),d=n("b924"),g=n("e71c"),p=n("234a"),f=n("4c55"),h=n("2fa3"),y=[{en:"id",es:"ID"},{en:"phone",es:"TELEFONO"},{en:"entity",es:"ENTIDAD"},{en:"address",es:"DIRECCION"},{en:"neighborhood",es:"BARRIO"},{en:"otherNumber",es:"OTRO NUMERO"},{en:"extension",es:"EXTENSION"}],N=["phone","entity","address"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={name:"EmergencyNumbers",components:{TableView:m["a"],InteractionOptions:d["a"]},data:function(){return{loadingState:!0,alterEmergencyNumbers:!1,reRenderTable:0,selected:[],visibleColumns:N,loadingDelete:!1,isCreate:null,gettingInfo:!1,loadingAlter:!1,emergencyNumberData:{phone:null,entity:null,address:null,neighborhood:null,otherNumber:null,extension:null}}},mixins:[p["a"]],methods:{openCreateNew:function(){this.isCreate=!0,this.reset(),this.alterEmergencyNumbers=!0},openUpdate:function(){var e=this;return c()(u.a.mark((function t(){var n;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isCreate=!1,e.reset(),e.alterEmergencyNumbers=!0,e.gettingInfo=!0,t.next=6,e.$store.dispatch("emergencyNumbers/getForId",e.selected[0].id);case 6:n=t.sent,e.emergencyNumberData=n,e.gettingInfo=!1;case 9:case"end":return t.stop()}}),t)})))()},alterRow:function(){var e=this;return c()(u.a.mark((function t(){var n,r,a,s,i,o;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loadingAlter=!0,!e.isCreate){t.next=22;break}return t.prev=2,t.next=5,f["a"].getApiFormat(e.emergencyNumberData);case 5:return n=t.sent,t.next=8,e.$store.dispatch("emergencyNumbers/store",n);case 8:r="Registro exitoso",e.getData(),e.alterEmergencyNumbers=!1,e.loadingAlter=!1,e.createNotification(x({message:r,timeout:3e3},g["q"])),t.next=20;break;case 15:t.prev=15,t.t0=t["catch"](2),a=Object(h["d"])(t.t0),e.createNotification(x({message:a,timeout:5e3},g["b"])),e.loadingAlter=!1;case 20:t.next=40;break;case 22:return t.prev=22,t.next=25,f["a"].getApiFormat(e.emergencyNumberData);case 25:return s=t.sent,t.next=28,e.$store.dispatch("emergencyNumbers/update",s);case 28:i="Actualizacion exitosa",e.getData(),e.alterEmergencyNumbers=!1,e.loadingAlter=!1,e.createNotification(x({message:i,timeout:3e3},g["q"])),t.next=40;break;case 35:t.prev=35,t.t1=t["catch"](22),o=Object(h["d"])(t.t1),e.createNotification(x({message:o,timeout:5e3},g["b"])),e.loadingAlter=!1;case 40:case"end":return t.stop()}}),t,null,[[2,15],[22,35]])})))()},organizerDataDelete:function(e){return e.reduce((function(e,t){return e.push({principal:t.phone,caption:t.extension,side:t.entity}),e}),[])},openDelete:function(){var e=this;this.$q.dialog({component:b["a"],parent:this,dataShow:this.organizerDataDelete(this.selected),dataDelete:this.selected,deleteFunction:this.deleteRows}).onOk((function(){e.selected=[],e.reRenderTable+=1})).onCancel((function(){})).onDismiss((function(){e.getData()}))},deleteRows:function(e){var t=this;return c()(u.a.mark((function n(){return u.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("emergencyNumbers/remove",e);case 2:case"end":return n.stop()}}),n)})))()},reset:function(){this.emergencyNumberData={phone:null,entity:null,address:null,neighborhood:null,otherNumber:null,extension:null}},getData:function(){var e=this;return c()(u.a.mark((function t(){return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("emergencyNumbers/get");case 2:e.loadingState=!1;case 3:case"end":return t.stop()}}),t)})))()}},computed:{user:function(){return this.$q.localStorage.getItem(g["n"])},emergencyNumbers:function(){return this.$store.getters["emergencyNumbers/list"]},columns:function(){return Object(g["t"])(this.emergencyNumbers,y,N)}},beforeRouteEnter:function(e,t,n){n((function(t){if(t.user){var r=Object(g["v"])(t.user.type),a=r.find((function(t){return t===e.path}));a||n(r[0]),n()}else n("/")}))},created:function(){var e=this;return c()(u.a.mark((function t(){return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:case"end":return t.stop()}}),t)})))()}},D=w,C=(n("543f"),n("2877")),O=Object(C["a"])(D,r,a,!1,null,null,null);t["default"]=O.exports},"543f":function(e,t,n){"use strict";var r=n("b1cb"),a=n.n(r);a.a},b1cb:function(e,t,n){}}]);