(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{5924:function(e,t,a){"use strict";var r=a("ab7b"),i=a.n(r);i.a},"68e5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md q-gutter-sm bg-grey-2 background-height relative-position"},[a("q-breadcrumbs",[a("q-breadcrumbs-el",{attrs:{label:"Radios",icon:"assignment",to:e.ROUTES.vehicles.radios}}),a("q-breadcrumbs-el",{attrs:{label:e.action.created?"Crear":"Modificar",icon:e.action.created?"attach_file":"edit"}})],1),e.loadingState?a("div",[a("q-spinner-tail",{staticClass:"absolute-center text-default",attrs:{size:"5em"}})],1):e.withVehicles?a("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[a("q-expansion-item",{attrs:{"expand-separator":"",icon:"account_circle",label:"Datos","default-opened":!0,caption:e.action.created?null:e.radioData.serial}},[a("q-card",[a("q-card-section",[a("q-form",{on:{submit:e.onSubmit}},[a("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n              Información principal:\n            ")]),a("div",{staticClass:"row"},[a("q-input",{staticClass:"ControlForm col-3 q-mr-md",attrs:{filled:"",label:"Serial","stack-label":"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Por favor ingresa un serial"},function(e){return e&&e.length<=20||"Longitud maxima de 20 carácteres"}]},model:{value:e.radioData.serial,callback:function(t){e.$set(e.radioData,"serial",t)},expression:"radioData.serial"}}),a("q-input",{staticClass:"ControlForm col-3 q-mr-md",attrs:{filled:"",label:"Marca","stack-label":"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Por favor ingresa una marca"},function(e){return e&&e.length<=20||"Longitud maxima de 20 carácteres"}]},model:{value:e.radioData.mark,callback:function(t){e.$set(e.radioData,"mark",t)},expression:"radioData.mark"}}),a("q-select",{staticClass:"ControlForm col-2 q-mr-md",attrs:{filled:"",options:["Nuevo","Optimo","Deficiente","Inservible"],label:"Estado","stack-label":"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Por favor selecciona un estado"}]},model:{value:e.radioData.state,callback:function(t){e.$set(e.radioData,"state",t)},expression:"radioData.state"}}),a("q-select",{staticClass:"ControlForm col",attrs:{filled:"",options:["Digital","Analogo"],label:"Señal","stack-label":"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Por favor selecciona una señal"}]},model:{value:e.radioData.signal,callback:function(t){e.$set(e.radioData,"signal",t)},expression:"radioData.signal"}})],1),a("div",{staticClass:"row"},[a("q-select",{staticClass:"ControlForm col-3 q-mr-md",attrs:{filled:"",options:["Portatil","Movil","de Base"],label:"Tipo","stack-label":"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Por favor selecciona un tipo"}]},model:{value:e.radioData.type,callback:function(t){e.$set(e.radioData,"type",t)},expression:"radioData.type"}}),a("q-select",{staticClass:"ControlForm col",attrs:{filled:"",label:"Vehiculo",options:e.vehicles,"option-value":"id","option-label":"name","stack-label":"","lazy-rules":"",rules:[]},model:{value:e.radioData.vehicle,callback:function(t){e.$set(e.radioData,"vehicle",t)},expression:"radioData.vehicle"}})],1),a("q-btn",{staticClass:"full-width",attrs:{label:e.action.created?"GUARDAR":"ACTUALIZAR DATOS",loading:e.loading,type:"submit",color:"positive"}})],1)],1)],1)],1)],1):e.withVehicles?e._e():a("div",{staticClass:"text-center"},[a("div",{staticClass:"empty-state normal-section empty-vehicles"}),a("h4",{staticClass:"empty-copy"},[e._v(" No hay vehiculos disponibles ")]),"supervisor"===e.user.type||"maquinista"!==e.user.type&&"administrador-general"!==e.user.type?e._e():a("q-btn",{staticClass:"text-capitalize",staticStyle:{height:"min-content"},attrs:{color:"positive",label:"LISTAR RANGOS",to:e.ROUTES.vehicles.vehicles}})],1)],1)},i=[],s=(a("456d"),a("8a81"),a("d25f"),a("9986"),a("8e6e"),a("9523")),o=a.n(s),n=a("c973"),l=a.n(n),c=a("a34a"),u=a.n(c),d=(a("a481"),a("5df3"),a("06db"),a("cadf"),a("ac6a"),a("551c"),a("7514"),a("e71c")),p=a("234a"),b=a("7a73"),f=a("2fa3");function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={name:"AlterPromotions",mixins:[p["a"]],data:function(){return{loadingState:!0,radioData:{serial:null,mark:null,state:"Nuevo",signal:"Digital",type:"Portatil",vehicle:null},loading:!1,ROUTES:d["p"],withVehicles:!0,vehicles:[]}},methods:{onSubmit:function(){var e=this;return l()(u.a.mark((function t(){var a,r,i,s,o,n;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,!e.action.created){t.next=21;break}return t.prev=2,t.next=5,b["a"].getApiFormat(e.radioData);case 5:return a=t.sent,t.next=8,e.$store.dispatch("radios/store",a);case 8:r="Registro exitoso",e.createNotification(h({message:r,timeout:3e3},d["q"])),e.loading=!1,e.$router.replace(d["p"].vehicles.radios),t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](2),i=Object(f["d"])(t.t0),e.createNotification(h({message:i,timeout:5e3},d["b"])),e.loading=!1;case 19:t.next=38;break;case 21:return t.prev=21,t.next=24,b["a"].getApiFormat(e.radioData);case 24:return s=t.sent,t.next=27,e.$store.dispatch("radios/update",s);case 27:o="Actualizacion satisfactoria",e.createNotification(h({message:o,timeout:3e3},d["q"])),e.loading=!1,e.$router.replace(d["p"].vehicles.radios),t.next=38;break;case 33:t.prev=33,t.t1=t["catch"](21),n=Object(f["d"])(t.t1),e.createNotification(h({message:n,timeout:5e3},d["b"])),e.loading=!1;case 38:case"end":return t.stop()}}),t,null,[[2,14],[21,33]])})))()}},computed:{user:function(){return this.$q.localStorage.getItem(d["n"])},action:function(){return this.$q.localStorage.getItem(d["k"])}},created:function(){var e=this;return l()(u.a.mark((function t(){var a,r;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=Promise,t.next=3,e.$store.dispatch("vehicles/get");case 3:return t.t1=e.vehicles=t.sent,t.t2=[t.t1],t.next=7,t.t0.all.call(t.t0,t.t2);case 7:if(e.withVehicles=e.vehicles.length>0,!e.withVehicles){t.next=18;break}if(!e.action.created){t.next=13;break}e.radioData.vehicle=e.vehicles?e.vehicles[0]:{},t.next=18;break;case 13:return a=e.action.id,t.next=16,e.$store.dispatch("radios/getForId",a);case 16:r=t.sent,e.radioData=r;case 18:e.loadingState=!1;case 19:case"end":return t.stop()}}),t)})))()},beforeRouteEnter:function(e,t,a){a((function(t){if(t.user){var r=Object(d["v"])(t.user.type),i=r.find((function(t){return t===e.path}));i||a(r[0]),a()}else a("/")}))}},g=v,x=(a("5924"),a("2877")),D=Object(x["a"])(g,r,i,!1,null,null,null);t["default"]=D.exports},ab7b:function(e,t,a){}}]);