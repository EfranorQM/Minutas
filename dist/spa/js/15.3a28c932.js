(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"551e":function(t,e,a){"use strict";var n=a("6277"),o=a.n(n);o.a},"566a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md q-gutter-sm bg-grey-2 background-height relative-position"},[a("q-breadcrumbs",[a("q-breadcrumbs-el",{attrs:{label:"Sanciones",icon:"person",to:t.ROUTES.personal.sanctions}}),a("q-breadcrumbs-el",{attrs:{label:t.action.created?"Crear":"Modificar",icon:t.action.created?"attach_file":"edit"}})],1),t.loadingState?a("div",[a("q-spinner-tail",{staticClass:"absolute-center text-default",attrs:{size:"5em"}})],1):t.withEmployees?a("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[a("q-expansion-item",{attrs:{"expand-separator":"",icon:"account_circle",label:"Datos","default-opened":!0,caption:t.action.created?null:t.sanctionData.order}},[a("q-card",[a("q-card-section",[a("q-form",{on:{submit:t.onSubmit}},[a("div",{staticClass:"row q-mb-xs text-bold"},[t._v("\n              Información principal:\n            ")]),a("div",{staticClass:"row"},[a("q-input",{staticClass:"ControlForm col-2 q-mr-md",attrs:{filled:"",label:"Fecha","stack-label":"",readonly:"",rules:[function(t){return t&&t.length>0||"Por favor ingresa una fecha"}]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD/MM/YYYY",options:t.maxDateIsToday},on:{input:function(){return t.$refs.qDateProxy.hide()}},model:{value:t.sanctionData.date,callback:function(e){t.$set(t.sanctionData,"date",e)},expression:"sanctionData.date"}})],1)],1)]},proxy:!0}]),model:{value:t.sanctionData.date,callback:function(e){t.$set(t.sanctionData,"date",e)},expression:"sanctionData.date"}}),a("q-input",{staticClass:"ControlForm col-3 q-mr-md",attrs:{filled:"",label:"Tipo sanción","stack-label":"","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Por favor ingresa un tipo"},function(t){return t&&t.length<=100||"Longitud maxima de 100 carácteres"}]},model:{value:t.sanctionData.sanctionType,callback:function(e){t.$set(t.sanctionData,"sanctionType",e)},expression:"sanctionData.sanctionType"}}),a("q-input",{staticClass:"ControlForm col-3 q-mr-md",attrs:{filled:"",label:"Orden","stack-label":"","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Por favor ingresa una orden"},function(t){return t&&t.length<=30||"Longitud maxima de 30 carácteres"}]},model:{value:t.sanctionData.order,callback:function(e){t.$set(t.sanctionData,"order",e)},expression:"sanctionData.order"}})],1),a("div",{staticClass:"row"},[a("q-select",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",label:"Empleado",options:t.employees,"option-value":"id","option-label":function(t){return null===t?"":t.person+" - "+t.position},"stack-label":"","lazy-rules":"",rules:[]},model:{value:t.sanctionData.employee,callback:function(e){t.$set(t.sanctionData,"employee",e)},expression:"sanctionData.employee"}})],1),a("div",{staticClass:"row q-mb-xs text-bold"},[t._v("\n              Información adicional:\n            ")]),a("div",{staticClass:"row"},[a("q-input",{staticClass:"ControlForm col-5 q-mr-md",attrs:{filled:"",autogrow:"",label:"Descripción","stack-label":"","lazy-rules":"",rules:[]},model:{value:t.sanctionData.description,callback:function(e){t.$set(t.sanctionData,"description",e)},expression:"sanctionData.description"}})],1),a("q-btn",{staticClass:"full-width",attrs:{label:t.action.created?"GUARDAR":"ACTUALIZAR DATOS",loading:t.loading,type:"submit",color:"positive"}})],1)],1)],1)],1)],1):a("div",{staticClass:"text-center"},[a("div",{staticClass:"empty-state normal-section empty-curriculums"}),a("h4",{staticClass:"empty-copy"},[t._v(" No hay empleados disponibles ")]),"supervisor"===t.user.type||"personal"!==t.user.type&&"administrador-general"!==t.user.type?t._e():a("q-btn",{staticClass:"text-capitalize",staticStyle:{height:"min-content"},attrs:{color:"positive",label:"LISTAR EMPLEADOS",to:t.ROUTES.personal.curriculum}})],1)],1)},o=[],r=(a("456d"),a("8a81"),a("d25f"),a("9986"),a("8e6e"),a("9523")),s=a.n(r),i=a("c973"),c=a.n(i),l=a("a34a"),u=a.n(l),p=(a("a481"),a("7514"),a("bd4c")),d=a("e71c"),m=a("234a"),f=a("99b1"),b=a("2fa3");function y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?y(Object(a),!0).forEach((function(e){s()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var D=p["b"].formatDate,v=Date.now(),h={name:"AlterSanctions",mixins:[m["a"]],data:function(){return{loadingState:!0,sanctionData:{date:D(v,"DD/MM/YYYY"),sanctionType:null,orden:null,description:null,employee:null},loading:!1,today:v,ROUTES:d["p"],withEmployees:!0,employees:[]}},methods:{onSubmit:function(){var t=this;return c()(u.a.mark((function e(){var a,n,o,r,s,i;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loading=!0,!t.action.created){e.next=21;break}return e.prev=2,e.next=5,f["a"].getApiFormat(t.sanctionData);case 5:return a=e.sent,e.next=8,t.$store.dispatch("sanctions/store",a);case 8:n="Registro exitoso",t.createNotification(g({message:n,timeout:3e3},d["q"])),t.loading=!1,t.$router.replace(d["p"].personal.sanctions),e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](2),o=Object(b["d"])(e.t0),t.createNotification(g({message:o,timeout:5e3},d["b"])),t.loading=!1;case 19:e.next=38;break;case 21:return e.prev=21,e.next=24,f["a"].getApiFormat(t.sanctionData);case 24:return r=e.sent,e.next=27,t.$store.dispatch("sanctions/update",r);case 27:s="Actualizacion satisfactoria",t.createNotification(g({message:s,timeout:3e3},d["q"])),t.loading=!1,t.$router.replace(d["p"].personal.sanctions),e.next=38;break;case 33:e.prev=33,e.t1=e["catch"](21),i=Object(b["d"])(e.t1),t.createNotification(g({message:i,timeout:5e3},d["b"])),t.loading=!1;case 38:case"end":return e.stop()}}),e,null,[[2,14],[21,33]])})))()},maxDateIsToday:function(t){return t<=D(v,"YYYY/MM/DD")},minDateIsToday:function(t){return t>=D(v,"YYYY/MM/DD")}},computed:{user:function(){return this.$q.localStorage.getItem(d["n"])},action:function(){return this.$q.localStorage.getItem(d["l"])}},created:function(){var t=this;return c()(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("employees/get");case 2:if(t.employees=e.sent,t.withEmployees=t.employees.length>0,!t.withEmployees){e.next=14;break}if(!t.action.created){e.next=9;break}t.sanctionData.employee=t.employees?t.employees[0]:{},e.next=14;break;case 9:return a=t.action.id,e.next=12,t.$store.dispatch("sanctions/getForId",a);case 12:n=e.sent,t.sanctionData=n;case 14:t.loadingState=!1;case 15:case"end":return e.stop()}}),e)})))()},beforeRouteEnter:function(t,e,a){a((function(e){if(e.user){var n=Object(d["v"])(e.user.type),o=n.find((function(e){return e===t.path}));o||a(n[0]),a()}else a("/")}))}},x=h,q=(a("551e"),a("2877")),w=Object(q["a"])(x,n,o,!1,null,null,null);e["default"]=w.exports},6277:function(t,e,a){}}]);