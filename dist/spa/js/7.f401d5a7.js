(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"2d6f":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md q-gutter-sm bg-grey-2 background-height relative-position"},[a("q-breadcrumbs",[a("q-breadcrumbs-el",{attrs:{label:"Minutas",icon:"assignment",to:e.ROUTES.bills.bills}}),a("q-breadcrumbs-el",{attrs:{label:e.action.created?"Crear":"Modificar",icon:e.action.created?"attach_file":"edit"}})],1),e.loadingState?a("div",[a("q-spinner-tail",{staticClass:"absolute-center text-default",attrs:{size:"5em"}})],1):e.withIssueTypes&&e.withEmployees?a("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[a("q-expansion-item",{attrs:{"expand-separator":"",icon:"account_circle",label:"Datos","default-opened":!0,caption:e.action.created?null:e.billData.employee}},[a("q-card",[a("q-card-section",[a("q-form",{on:{submit:e.onSubmit}},[e.action.created?e._e():a("div",{staticClass:"q-mb-xs text-center text-bold q-py-xs note"},[e._v("\n              Solo esta permitido modificar la descripción, si crees que es necesario\n              puedes crear una nueva nota.\n            ")]),a("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n              Información principal:\n            ")]),a("div",{staticClass:"row"},[a("q-select",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",label:"Usuario en sesión",options:e.employees,readonly:"","option-value":"id","option-label":"person","stack-label":"","lazy-rules":"",rules:[]},model:{value:e.billData.userSession,callback:function(t){e.$set(e.billData,"userSession",t)},expression:"billData.userSession"}}),a("q-input",{staticClass:"ControlForm col-2 q-mr-md",attrs:{filled:"",disable:"",label:"Fecha","stack-label":"",readonly:"",rules:[function(e){return e&&e.length>0||"Por favor ingresa una fecha"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD/MM/YYYY",options:e.maxDateIsToday},on:{input:function(){return e.$refs.qDateProxy.hide()}},model:{value:e.billData.date,callback:function(t){e.$set(e.billData,"date",t)},expression:"billData.date"}})],1)],1)]},proxy:!0}]),model:{value:e.billData.date,callback:function(t){e.$set(e.billData,"date",t)},expression:"billData.date"}}),a("q-input",{staticClass:"ControlForm col-2 q-mr-md",attrs:{filled:"",mask:"time",disable:"",label:"Hora","stack-label":"",readonly:"",rules:[function(e){return e&&e.length>0||"Por favor ingresa una hora"}]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{model:{value:e.billData.hour,callback:function(t){e.$set(e.billData,"hour",t)},expression:"billData.hour"}})],1)],1)]},proxy:!0}]),model:{value:e.billData.hour,callback:function(t){e.$set(e.billData,"hour",t)},expression:"billData.hour"}}),a("q-select",{staticClass:"ControlForm col-3",attrs:{filled:"",readonly:!e.action.created,label:"Asunto",options:e.issueTypes,"option-value":"id","option-label":"name","stack-label":"","lazy-rules":"",rules:[]},model:{value:e.billData.issueType,callback:function(t){e.$set(e.billData,"issueType",t)},expression:"billData.issueType"}})],1),a("div",{staticClass:"row"},[a("q-input",{staticClass:"ControlForm col-5",attrs:{filled:"",autogrow:"",label:"Descripción","stack-label":"","lazy-rules":"",rules:[]},model:{value:e.billData.description,callback:function(t){e.$set(e.billData,"description",t)},expression:"billData.description"}})],1),e.billData.issueType&&"Recepción de emergencia"===e.billData.issueType.name?a("div",[a("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n                Información Emergencia:\n              ")]),a("div",{staticClass:"row"},[a("q-select",{staticClass:"ControlForm col-3 q-mr-md",attrs:{filled:"",options:["En seguimiento","Terminada","Falsa alarma"],label:"Estado","stack-label":"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Por favor selecciona un estado"}]},model:{value:e.emergency.state,callback:function(t){e.$set(e.emergency,"state",t)},expression:"emergency.state"}}),a("SelectionInput",{staticClass:"col q-mr-md",attrs:{readonly:!e.action.created,searchParent:e.emergency.event,optionsMenu:e.events,optionValue:"id",optionLabel:"name",filled:!0,label:"Evento",hint:e.emergency.event?"":"Escribe por lo menos dos letras, ten en cuenta las tildes.",rules:[function(){return e.emergency.event||"Por favor selecciona un evento"}]},model:{value:e.emergency.event,callback:function(t){e.$set(e.emergency,"event",t)},expression:"emergency.event"}})],1),a("div",{staticClass:"row"},[a("q-input",{staticClass:"ControlForm col-4 q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Dirección","stack-label":"","lazy-rules":"",rules:[function(t){return"Recepción de emergencia"!==e.billData.issueType.name||(!!(t&&t.length>0)||"Por favor ingrese una dirección")}]},model:{value:e.emergency.address,callback:function(t){e.$set(e.emergency,"address",t)},expression:"emergency.address"}}),a("q-input",{staticClass:"ControlForm col-4 q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Barrio","stack-label":"","lazy-rules":"",rules:[function(t){return"Recepción de emergencia"!==e.billData.issueType.name||(!!(t&&t.length>0)||"Por favor ingrese un barrio")}]},model:{value:e.emergency.neighborhood,callback:function(t){e.$set(e.emergency,"neighborhood",t)},expression:"emergency.neighborhood"}})],1),a("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n                Quien que reporta:\n              ")]),a("div",{staticClass:"row"},[a("q-select",{staticClass:"ControlForm col",attrs:{filled:"",readonly:!e.action.created,label:"Tipo",options:e.reportTypes,"option-value":"id","option-label":"name","stack-label":"","lazy-rules":"",rules:[]},model:{value:e.emergency.report.type,callback:function(t){e.$set(e.emergency.report,"type",t)},expression:"emergency.report.type"}})],1),a("div",{staticClass:"row"},[a("q-input",{staticClass:"ControlForm col-4 q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Nombre","stack-label":"","lazy-rules":"",rules:[function(t){return"Recepción de emergencia"!==e.billData.issueType.name||(!!(t&&t.length>0)||"Por favor ingrese un nombre")}]},model:{value:e.emergency.report.name,callback:function(t){e.$set(e.emergency.report,"name",t)},expression:"emergency.report.name"}}),a("q-input",{staticClass:"ControlForm col-3 q-mr-md",attrs:{filled:"",readonly:!e.action.created,type:"number",min:0,label:"Documento","stack-label":"","lazy-rules":"",rules:[function(t){return"Recepción de emergencia"!==e.billData.issueType.name||(t&&t.length>0?!!(t&&t>0&&t.length<=10)||"Numero Invalido":"Por favor ingrese un documento")}]},model:{value:e.emergency.report.document,callback:function(t){e.$set(e.emergency.report,"document",t)},expression:"emergency.report.document"}}),a("q-input",{staticClass:"ControlForm col",attrs:{filled:"",readonly:!e.action.created,label:"Telefono",type:"number",min:0,"stack-label":"","lazy-rules":"",rules:[function(t){return"Recepción de emergencia"!==e.billData.issueType.name||(t&&t.length>0?!!(t&&t>0&&t.length<=10)||"Numero Invalido":"Por favor ingrese un telefono")}]},model:{value:e.emergency.report.phone,callback:function(t){e.$set(e.emergency.report,"phone",t)},expression:"emergency.report.phone"}})],1)]):e._e(),e.billData.issueType&&"Entrada de personal"===e.billData.issueType.name||e.billData.issueType&&"Salida de personal"===e.billData.issueType.name?a("div",[a("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n                Información entrada/salida del personal:\n              ")]),a("q-select",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Empleado",options:e.employees,"option-value":"id","option-label":function(e){return null===e?"":e.person+" - "+e.code},"stack-label":"","lazy-rules":"",rules:[]},model:{value:e.personal.employee,callback:function(t){e.$set(e.personal,"employee",t)},expression:"personal.employee"}}),e.action.created?a("div",[a("q-btn",{staticClass:"full-width",attrs:{loading:e.loading,color:"blue",label:"Registrar Mediante Huella"},on:{click:e.registrarConHuella}})],1):e._e()],1):e._e(),a("br"),e.billData.issueType&&"Entrada visitante"===e.billData.issueType.name||e.billData.issueType&&"Salida visitante"===e.billData.issueType.name?a("div",[a("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n                Información entrada/salida de visitante:\n              ")]),a("div",{staticClass:"row"},[a("q-input",{staticClass:"ControlForm col-5 q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Nombre","stack-label":"","lazy-rules":"",rules:[function(t){return"Entrada visitante"!==e.billData.issueType.name&&"Salida visitante"!==e.billData.issueType.name||(!!(t&&t.length>0)||"Por favor ingrese un nombre")}]},model:{value:e.visitor.name,callback:function(t){e.$set(e.visitor,"name",t)},expression:"visitor.name"}}),a("q-input",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Documento",type:"number",min:0,"stack-label":"","lazy-rules":"",rules:[function(t){return"Entrada visitante"!==e.billData.issueType.name&&"Salida visitante"!==e.billData.issueType.name||(t&&t.length>0?!!(t&&t>0&&t.length<=10)||"Numero Invalido":"Por favor ingrese un documento")}]},model:{value:e.visitor.document,callback:function(t){e.$set(e.visitor,"document",t)},expression:"visitor.document"}}),a("q-input",{staticClass:"ControlForm col",attrs:{filled:"",readonly:!e.action.created,label:"Telefono",type:"number",min:0,"stack-label":"","lazy-rules":"",rules:[function(t){return"Entrada visitante"!==e.billData.issueType.name&&"Salida visitante"!==e.billData.issueType.name||(t&&t.length>0?!!(t&&t>0&&t.length<=10)||"Numero Invalido":"Por favor ingrese un telefono")}]},model:{value:e.visitor.phone,callback:function(t){e.$set(e.visitor,"phone",t)},expression:"visitor.phone"}})],1)]):e._e(),e.billData.issueType&&"Entrada de máquina"===e.billData.issueType.name||e.billData.issueType&&"Salida de máquina"===e.billData.issueType.name?a("div",[a("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n                Información entrada/salida de máquina:\n              ")]),a("div",{staticClass:"row"},[a("q-select",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Empleado que reporta",options:e.employees,"option-value":"id","option-label":function(e){return null===e?"":e.person+" - "+e.code},"stack-label":"","lazy-rules":"",rules:[]},model:{value:e.machine.employee,callback:function(t){e.$set(e.machine,"employee",t)},expression:"machine.employee"}}),a("q-select",{staticClass:"ControlForm col-2 q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Vehiculo",options:e.vehicles,"option-value":"id","option-label":"name","stack-label":"","lazy-rules":"",rules:[]},on:{input:e.updateElements},model:{value:e.machine.vehicle,callback:function(t){e.$set(e.machine,"vehicle",t)},expression:"machine.vehicle"}}),a("q-select",{staticClass:"ControlForm col",attrs:{filled:"",readonly:!e.action.created,"use-chips":"",multiple:"",label:"Tripulantes",options:e.employees,"option-value":"id","option-label":"person","stack-label":"","lazy-rules":"",rules:[]},model:{value:e.machine.crewmans,callback:function(t){e.$set(e.machine,"crewmans",t)},expression:"machine.crewmans"}})],1),a("div",{staticClass:"row"},[a("q-select",{staticClass:"ControlForm col",attrs:{readonly:!e.action.created,filled:"","use-chips":"",multiple:"",loading:e.loadChangeVehicle,options:e.elements,"option-value":"id","option-label":function(e){return null===e?"":e.name+" - "+e.inventoryCode},label:"Elementos","stack-label":"","lazy-rules":"",hint:e.elements&&e.elements.length?"Selecciona los elementos que poseera el vehiculo":"No hay elementos disponibles",rules:[]},model:{value:e.machine.newElements,callback:function(t){e.$set(e.machine,"newElements",t)},expression:"machine.newElements"}})],1)]):e._e(),e.billData.issueType&&"Entrada extintor(es)"===e.billData.issueType.name||e.billData.issueType&&"Salida extintor(es)"===e.billData.issueType.name?a("div",[a("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n                Información entrada/salida de Extintor(es):\n              ")]),a("div",{staticClass:"row"},[a("q-select",{staticClass:"ControlForm col-3 q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Tipo",options:e.extinguisherTypes,"option-value":"id","option-label":"name","stack-label":"","lazy-rules":"",rules:[]},model:{value:e.extinguisher.extinguisherType,callback:function(t){e.$set(e.extinguisher,"extinguisherType",t)},expression:"extinguisher.extinguisherType"}}),a("q-input",{staticClass:"ControlForm col-3",attrs:{filled:"",readonly:!e.action.created,label:"Capacidad",mask:"# lb","fill-mask":"0","reverse-fill-mask":"",min:0,"stack-label":"","lazy-rules":"",rules:[function(t){return"Entrada extintor(es)"!==e.billData.issueType.name&&"Salida extintor(es)"!==e.billData.issueType.name||(t&&t.length>0?!!(t&&t.length<=20)||"Longitud maxima de 20 carácteres":"Por favor ingrese una capacidad")}]},model:{value:e.extinguisher.capacity,callback:function(t){e.$set(e.extinguisher,"capacity",t)},expression:"extinguisher.capacity"}})],1),a("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n                Propietario:\n              ")]),a("div",{staticClass:"row"},[a("q-input",{staticClass:"ControlForm col-5 q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Nombre","stack-label":"","lazy-rules":"",rules:[function(t){return"Entrada extintor(es)"!==e.billData.issueType.name&&"Salida extintor(es)"!==e.billData.issueType.name||(!!(t&&t.length>0)||"Por favor ingrese un nombre")}]},model:{value:e.extinguisher.owner.name,callback:function(t){e.$set(e.extinguisher.owner,"name",t)},expression:"extinguisher.owner.name"}}),a("q-input",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Documento",type:"number",min:0,"stack-label":"","lazy-rules":"",rules:[function(t){return"Entrada extintor(es)"!==e.billData.issueType.name&&"Salida extintor(es)"!==e.billData.issueType.name||(t&&t.length>0?!!(t&&t>0&&t.length<=10)||"Numero Invalido":"Por favor ingrese un documento")}]},model:{value:e.extinguisher.owner.document,callback:function(t){e.$set(e.extinguisher.owner,"document",t)},expression:"extinguisher.owner.document"}}),a("q-input",{staticClass:"ControlForm col",attrs:{filled:"",readonly:!e.action.created,label:"Telefono",type:"number",min:0,"stack-label":"","lazy-rules":"",rules:[function(t){return"Entrada extintor(es)"!==e.billData.issueType.name&&"Salida extintor(es)"!==e.billData.issueType.name||(t&&t.length>0?!!(t&&t>0&&t.length<=10)||"Numero Invalido":"Por favor ingrese un telefono")}]},model:{value:e.extinguisher.owner.phone,callback:function(t){e.$set(e.extinguisher.owner,"phone",t)},expression:"extinguisher.owner.phone"}})],1),a("div",{staticClass:"row"},[a("q-select",{staticClass:"ControlForm col-3 q-mr-md",attrs:{filled:"",readonly:!e.action.created,options:["Nota de servicio","Prestamo"],label:"Razon","stack-label":"","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Por favor selecciona una razon"}]},model:{value:e.extinguisher.reason,callback:function(t){e.$set(e.extinguisher,"reason",t)},expression:"extinguisher.reason"}}),a("q-input",{staticClass:"ControlForm col-5",attrs:{filled:"",autogrow:"",readonly:!e.action.created,label:e.extinguisher.reason,"stack-label":"","lazy-rules":"",rules:[]},model:{value:e.extinguisher.descriptionReason,callback:function(t){e.$set(e.extinguisher,"descriptionReason",t)},expression:"extinguisher.descriptionReason"}})],1)]):e._e(),e.billData.issueType&&"Relevo"===e.billData.issueType.name?a("div",[a("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n                Información Relevo\n              ")]),a("div",{staticClass:"row"},[a("q-select",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Entrega",options:e.employees,"option-value":"id","option-label":"person","stack-label":"","lazy-rules":"",rules:[function(e){return e&&e.id||"Es necesario especificar el empleado que entrega el turno"}]},model:{value:e.relief.employeeDelivery,callback:function(t){e.$set(e.relief,"employeeDelivery",t)},expression:"relief.employeeDelivery"}}),a("q-select",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Recibe",options:e.employees,"option-value":"id","option-label":"person","stack-label":"","lazy-rules":"",rules:[function(e){return e&&e.id||"Es necesario especificar el empleado que recibe el turno"}]},model:{value:e.relief.employeeReceives,callback:function(t){e.$set(e.relief,"employeeReceives",t)},expression:"relief.employeeReceives"}})],1),a("div",{staticClass:"row"},[a("q-input",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",autogrow:"",readonly:!e.action.created,label:"Tareas ejecutadas","stack-label":"","lazy-rules":"",rules:[]},model:{value:e.relief.tasksExecuted,callback:function(t){e.$set(e.relief,"tasksExecuted",t)},expression:"relief.tasksExecuted"}}),a("q-input",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",autogrow:"",readonly:!e.action.created,label:"Consignas","stack-label":"","lazy-rules":"",rules:[]},model:{value:e.relief.slogans,callback:function(t){e.$set(e.relief,"slogans",t)},expression:"relief.slogans"}}),a("q-input",{staticClass:"ControlForm col",attrs:{filled:"",autogrow:"",readonly:!e.action.created,label:"Novedades","stack-label":"","lazy-rules":"",rules:[]},model:{value:e.relief.news,callback:function(t){e.$set(e.relief,"news",t)},expression:"relief.news"}})],1)]):e._e(),e.billData.issueType&&"Novedades en máquinas"===e.billData.issueType.name?a("div",[a("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n                Información Novedades de máquinas\n              ")]),a("div",{staticClass:"row"},[a("q-select",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Empleado que reporta",options:e.employees,"option-value":"id","option-label":function(e){return null===e?"":e.person+" - "+e.position},"stack-label":"","lazy-rules":"",rules:[]},model:{value:e.noveltyMachine.employeeReport,callback:function(t){e.$set(e.noveltyMachine,"employeeReport",t)},expression:"noveltyMachine.employeeReport"}}),a("q-select",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Vehiculo",options:e.vehicles,"option-value":"id","option-label":"name","stack-label":"","lazy-rules":"",rules:[]},model:{value:e.noveltyMachine.vehicle,callback:function(t){e.$set(e.noveltyMachine,"vehicle",t)},expression:"noveltyMachine.vehicle"}}),a("q-select",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Tipo de novedad",options:e.novelthyTypes,"option-value":"id","option-label":"name","stack-label":"","lazy-rules":"",rules:[]},model:{value:e.noveltyMachine.novelthyType,callback:function(t){e.$set(e.noveltyMachine,"novelthyType",t)},expression:"noveltyMachine.novelthyType"}})],1),a("div",{staticClass:"row"},[a("q-input",{staticClass:"ControlForm col-5",attrs:{filled:"",autogrow:"",readonly:!e.action.created,label:"Descripción de novedad","stack-label":"","lazy-rules":"",rules:[]},model:{value:e.noveltyMachine.novelthyDescription,callback:function(t){e.$set(e.noveltyMachine,"novelthyDescription",t)},expression:"noveltyMachine.novelthyDescription"}})],1)]):e._e(),e.billData.issueType&&"Nota"===e.billData.issueType.name?a("div",[a("div",{staticClass:"row q-mb-xs text-bold"},[e._v("\n                Información de la Nota:\n              ")]),a("div",{staticClass:"row"},[a("q-input",{staticClass:"ControlForm col-5 q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Nombre","stack-label":"","lazy-rules":"",rules:[function(t){return"Nota"!==e.billData.issueType.name||(!!(t&&t.length>0)||"Por favor ingrese un nombre")}]},model:{value:e.notes.name,callback:function(t){e.$set(e.notes,"name",t)},expression:"notes.name"}}),a("q-input",{staticClass:"ControlForm col q-mr-md",attrs:{filled:"",readonly:!e.action.created,label:"Documento",type:"number",min:0,"stack-label":"","lazy-rules":"",rules:[function(t){return"Nota"!==e.billData.issueType.name||(t&&t.length>0?!!(t&&t>0&&t.length<=10)||"Numero Invalido":"Por favor ingrese un documento")}]},model:{value:e.notes.document,callback:function(t){e.$set(e.notes,"document",t)},expression:"notes.document"}}),a("q-input",{staticClass:"ControlForm col",attrs:{filled:"",readonly:!e.action.created,label:"Telefono",type:"number",min:0,"stack-label":"","lazy-rules":"",rules:[function(t){return"Nota"!==e.billData.issueType.name||(t&&t.length>0?!!(t&&t>0&&t.length<=10)||"Numero Invalido":"Por favor ingrese un telefono")}]},model:{value:e.notes.phone,callback:function(t){e.$set(e.notes,"phone",t)},expression:"notes.phone"}})],1)]):e._e(),a("q-btn",{staticClass:"full-width",attrs:{label:e.action.created?"GUARDAR":"ACTUALIZAR DATOS",loading:e.loading,type:"submit",color:"positive"}})],1)],1)],1)],1)],1):e.withIssueTypes?e.withEmployees?e._e():a("div",{staticClass:"text-center"},[a("div",{staticClass:"empty-state normal-section empty-curriculum"}),a("h4",{staticClass:"empty-copy"},[e._v(" No hay empleados disponibles ")]),"supervisor"===e.user.type||"personal"!==e.user.type&&"administrador-general"!==e.user.type?e._e():a("q-btn",{staticClass:"text-capitalize",staticStyle:{height:"min-content"},attrs:{color:"positive",label:"LISTAR HOJAS DE VIDA",to:e.ROUTES.personal.curriculum}})],1):a("div",{staticClass:"text-center"},[a("div",{staticClass:"empty-state normal-section empty-issueTypes"}),a("h4",{staticClass:"empty-copy"},[e._v(" No hay asuntos disponibles ")]),"supervisor"===e.user.type||"minuta"!==e.user.type&&"administrador-general"!==e.user.type?e._e():a("q-btn",{staticClass:"text-capitalize",staticStyle:{height:"min-content"},attrs:{color:"positive",label:"LISTAR ASUNTOS",to:e.ROUTES.bills.issueTypes}})],1)],1)},s=[],n=(a("456d"),a("8a81"),a("d25f"),a("9986"),a("8e6e"),a("448a")),i=a.n(n),o=a("9523"),r=a.n(o),c=a("c973"),u=a.n(c),d=a("a34a"),p=a.n(d),m=(a("a481"),a("7f7f"),a("5df3"),a("06db"),a("cadf"),a("ac6a"),a("551c"),a("7514"),a("bd4c")),b=a("e71c"),y=a("234a"),v=a("0ee4"),h=a("0e14"),f=a("2fa3");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D=m["b"].formatDate,T=Date.now(),C={name:"AlterBills",components:{SelectionInput:h["a"]},mixins:[y["a"]],data:function(){return{loadingState:!0,billData:{date:D(T,"DD/MM/YYYY"),hour:D(Date.now(),"HH:mm"),description:null,userSession:null,issueType:null,attributes:null},emergency:{event:null,state:"En seguimiento",address:null,neighborhood:null,report:{name:null,document:null,phone:null,type:null}},personal:{employee:null},visitor:{name:null,document:null,phone:null},machine:{employee:null,vehicle:null,crewmans:[],newElements:null},extinguisher:{extinguisherType:null,capacity:null,owner:{name:null,document:null,phone:null},reason:"Nota de servicio",descriptionReason:null},relief:{employeeDelivery:null,tasksExecuted:null,employeeReceives:null,slogans:null,news:null},noveltyMachine:{employeeReport:null,vehicle:null,novelthyType:null,novelthyDescription:null},notes:{name:null,document:null,phone:null},elements:[],employee:null,loading:!1,today:T,ROUTES:b["p"],withIssueTypes:!0,withEmployees:!0,issueTypes:[],employees:[],events:[],loadChangeVehicle:!1,vehicles:[],extinguisherTypes:[],novelthyTypes:[]}},methods:{registrarConHuella:function(){var e=this;return u()(p.a.mark((function t(){var a,l,s,n,i,o;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,a=e.billData.userSession.id,l=e.billData.issueType.id,s=e.billData.description,t.next=7,v["a"].eh(e.billData.date,a,l,s);case 7:return n=t.sent,t.next=10,e.$store.dispatch("bills/store",n);case 10:i="Registro exitoso",e.createNotification(x({message:i,timeout:3e3},b["q"])),e.$router.replace(b["p"].bills.bills),t.next=20;break;case 15:t.prev=15,t.t0=t["catch"](0),o=Object(f["d"])(t.t0),e.createNotification(x({message:o,timeout:5e3},b["b"])),e.loading=!1;case 20:case"end":return t.stop()}}),t,null,[[0,15]])})))()},onSubmit:function(){var e=this;return u()(p.a.mark((function t(){var a,l,s,n,i,o,r,c;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("Relevo"!==e.billData.issueType.name||e.relief.employeeDelivery.id!==e.relief.employeeReceives.id){t.next=5;break}a="No es posible seleccionar al mismo empleado",e.createNotification(x({message:a,timeout:3e3},b["b"])),t.next=45;break;case 5:if(e.loading=!0,l={},l="Recepción de emergencia"===e.billData.issueType.name?x(x({},e.billData),{},{attributes:e.emergency}):"Entrada de personal"===e.billData.issueType.name||"Salida de personal"===e.billData.issueType.name?x(x({},e.billData),{},{attributes:e.personal}):"Entrada visitante"===e.billData.issueType.name||"Salida visitante"===e.billData.issueType.name?x(x({},e.billData),{},{attributes:e.visitor}):"Entrada de máquina"===e.billData.issueType.name||"Salida de máquina"===e.billData.issueType.name?x(x({},e.billData),{},{attributes:e.machine}):"Entrada extintor(es)"===e.billData.issueType.name||"Salida extintor(es)"===e.billData.issueType.name?x(x({},e.billData),{},{attributes:e.extinguisher}):"Relevo"===e.billData.issueType.name?x(x({},e.billData),{},{attributes:e.relief}):"Novedades en máquinas"===e.billData.issueType.name?x(x({},e.billData),{},{attributes:e.noveltyMachine}):"Nota"===e.billData.issueType.name?x(x({},e.billData),{},{attributes:e.notes}):x({},e.billData),!e.action.created){t.next=28;break}return t.prev=9,t.next=12,v["a"].getApiFormat(l);case 12:return s=t.sent,t.next=15,e.$store.dispatch("bills/store",s);case 15:n="Registro exitoso",e.createNotification(x({message:n,timeout:3e3},b["q"])),e.loading=!1,e.$router.replace(b["p"].bills.bills),t.next=26;break;case 21:t.prev=21,t.t0=t["catch"](9),i=Object(f["d"])(t.t0),e.createNotification(x({message:i,timeout:5e3},b["b"])),e.loading=!1;case 26:t.next=45;break;case 28:return t.prev=28,t.next=31,v["a"].getApiFormat(l);case 31:return o=t.sent,t.next=34,e.$store.dispatch("bills/update",o);case 34:r="Actualizacion satisfactoria",e.createNotification(x({message:r,timeout:3e3},b["q"])),e.loading=!1,e.$router.replace(b["p"].bills.bills),t.next=45;break;case 40:t.prev=40,t.t1=t["catch"](28),c=Object(f["d"])(t.t1),e.createNotification(x({message:c,timeout:5e3},b["b"])),e.loading=!1;case 45:case"end":return t.stop()}}),t,null,[[9,21],[28,40]])})))()},maxDateIsToday:function(e){return e<=D(T,"YYYY/MM/DD")},minDateIsToday:function(e){return e>=D(T,"YYYY/MM/DD")},updateElements:function(){var e=this;return u()(p.a.mark((function t(){var a,l;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadChangeVehicle=!0,e.elements=[],t.next=4,e.$store.dispatch("elements/getElementsWithoutVehicle");case 4:return a=t.sent,t.next=7,e.$store.dispatch("vehicles/getForId",e.machine.vehicle.id);case 7:l=t.sent,l.elements&&(e.machine.newElements=i()(l.elements),a.unshift.apply(a,i()(l.elements))),e.elements=a,e.loadChangeVehicle=!1;case 11:case"end":return t.stop()}}),t)})))()}},computed:{user:function(){return this.$q.localStorage.getItem(b["n"])},action:function(){return this.$q.localStorage.getItem(b["e"])}},created:function(){var e=this;return u()(p.a.mark((function t(){var a,l;return p.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=Promise,t.next=3,e.$store.dispatch("issueTypes/get");case 3:return t.t1=e.issueTypes=t.sent,t.next=6,e.$store.dispatch("employees/get");case 6:return t.t2=e.employees=t.sent,t.t3=[t.t1,t.t2],t.next=10,t.t0.all.call(t.t0,t.t3);case 10:if(e.withIssueTypes=e.issueTypes.length>0,e.withEmployees=e.employees.length>0,!e.withIssueTypes||!e.withEmployees){t.next=59;break}return t.t4=Promise,t.next=16,e.$store.dispatch("ui/getEvents");case 16:return t.t5=e.events=t.sent,t.next=19,e.$store.dispatch("vehicles/get");case 19:return t.t6=e.vehicles=t.sent,t.next=22,e.$store.dispatch("ui/getReportTypes");case 22:return t.t7=e.reportTypes=t.sent,t.next=25,e.$store.dispatch("ui/getNoveltyTypes");case 25:return t.t8=e.novelthyTypes=t.sent,t.next=28,e.$store.dispatch("vehicles/get");case 28:return t.t9=e.vehicles=t.sent,t.next=31,e.$store.dispatch("extinguisherTypes/get");case 31:return t.t10=e.extinguisherTypes=t.sent,t.t11=[t.t5,t.t6,t.t7,t.t8,t.t9,t.t10],t.next=35,t.t4.all.call(t.t4,t.t11);case 35:if(!e.action.created){t.next=53;break}return e.billData.userSession={id:e.user.id,person:e.user.name},e.billData.issueType=e.issueTypes?e.issueTypes[0]:{},e.emergency.report.type=e.reportTypes?e.reportTypes[0]:{},e.personal.employee=e.employees?e.employees[0]:{},e.machine.employee=e.employees?e.employees[0]:{},e.noveltyMachine.employeeReport=e.employees?e.employees[0]:{},e.machine.vehicle=e.vehicles?e.vehicles[0]:{},e.noveltyMachine.vehicle=e.vehicles?e.vehicles[0]:{},t.next=46,e.updateElements();case 46:e.extinguisher.extinguisherType=e.extinguisherTypes?e.extinguisherTypes[0]:{},e.noveltyMachine.novelthyType=e.novelthyTypes?e.novelthyTypes[0]:{},e.extinguisher.owner.job=e.professions?e.professions[0]:{},e.relief.employeeDelivery=e.employees?e.employees[0]:{},e.relief.employeeReceives=e.employees&&e.employees.length>1?e.employees[1]:{},t.next=59;break;case 53:return a=e.action.id,t.next=56,e.$store.dispatch("bills/getForId",a);case 56:l=t.sent,"Recepción de emergencia"===l.issueType.name?e.emergency=l.attributes:"Entrada de personal"===l.issueType.name||"Salida de personal"===l.issueType.name?e.personal=l.attributes:"Entrada de máquina"===l.issueType.name||"Salida de máquina"===l.issueType.name?(e.machine=l.attributes,e.updateElements()):"Entrada visitante"===l.issueType.name||"Salida visitante"===l.issueType.name?e.visitor=l.attributes:"Entrada extintor(es)"===l.issueType.name||"Salida extintor(es)"===l.issueType.name?e.extinguisher=l.attributes:"Relevo"===l.issueType.name?e.relief=l.attributes:"Novedades en máquinas"===l.issueType.name?e.noveltyMachine=l.attributes:"Nota"===l.issueType.name&&(e.notes=l.attributes),e.billData=l;case 59:e.loadingState=!1;case 60:case"end":return t.stop()}}),t)})))()},beforeRouteEnter:function(e,t,a){a((function(t){if(t.user){var l=Object(b["v"])(t.user.type),s=l.find((function(t){return t===e.path}));s||a(l[0]),a()}else a("/")}))}},q=C,k=(a("b0d1"),a("2877")),w=Object(k["a"])(q,l,s,!1,null,null,null);t["default"]=w.exports},b0d1:function(e,t,a){"use strict";var l=a("fed7"),s=a.n(l);s.a},fed7:function(e,t,a){}}]);