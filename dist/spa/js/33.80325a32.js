(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{"013f":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"background-login"},[n("div",{staticClass:"containter-login q-pa-lg  text-center"},[n("div",{staticClass:"column"},[n("div",{staticClass:"title-login q-mx-auto text-bold"},[t._v("\n        INICIO DE SESION\n      ")]),n("q-img",{staticClass:"q-mt-lg q-mb-md q-mx-auto",staticStyle:{width:"170px"},attrs:{src:"statics/user.png"}})],1),n("q-form",{staticClass:"q-mx-md",on:{submit:t.login}},[n("q-input",{staticClass:"ControlForm",attrs:{filled:"",label:"Código","stack-label":"","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Por favor ingresa tu codigo"}]},model:{value:t.userData.code,callback:function(e){t.$set(t.userData,"code",e)},expression:"userData.code"}}),n("div",{staticClass:"row"},[n("q-input",{staticClass:"ControlForm col",attrs:{filled:"",type:t.isPwd?"password":"text",label:"Constraseña","stack-label":"","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Por favor ingresa tu contraseña"}]},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.userData.password,callback:function(e){t.$set(t.userData,"password",e)},expression:"userData.password"}}),n("q-btn",{staticClass:"q-ml-sm q-mt-sm",attrs:{flat:"",round:"",color:"positive",icon:"fingerprint"},on:{click:function(e){t.toolbar=!0}}})],1),n("q-select",{staticClass:"ControlForm",attrs:{filled:"","stack-label":"",options:t.options,"option-value":"id","option-label":"name",label:"Tipo"},model:{value:t.userData.type,callback:function(e){t.$set(t.userData,"type",e)},expression:"userData.type"}}),n("div",{staticClass:"q-mt-lg"},[n("q-btn",{staticClass:"text-weight-bold button-login",attrs:{unelevated:"",loading:t.loading,label:"Ingresar",type:"submit"}})],1)],1)],1),n("q-dialog",{on:{hide:t.cancelLoginFingerPrint},model:{value:t.toolbar,callback:function(e){t.toolbar=e},expression:"toolbar"}},[n("q-card",{staticStyle:{width:"350px","max-width":"80vw"}},[n("q-toolbar",{staticClass:"q-mt-sm"},[n("q-avatar",{attrs:{color:"positive","text-color":"white",icon:"fingerprint"}}),n("q-toolbar-title",[n("span",{staticClass:"text-weight-bold"},[t._v("Acceso rapido")])]),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.cancelLoginFingerPrint}})],1),n("q-form",{staticClass:"q-mx-md",on:{submit:t.loginFingerPrint}},[n("q-card-section",{staticClass:"row text-center"},[n("span",{staticClass:"col-8 q-ml-auto q-mr-auto q-mb-md"},[t._v("\n              Oprime Ingresar y coloca la huella en el recuadro\n            ")]),n("center",{staticClass:"col-12"},[n("q-avatar",{attrs:{"text-color":"positive",size:"150px",icon:"fingerprint"}})],1)],1),n("q-card-actions",{staticClass:"q-mb-xs",attrs:{align:"center"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"negative",flat:"",label:"Cancelar"},on:{click:t.cancelLoginFingerPrint}}),n("q-btn",{attrs:{color:"positive",type:"submit",flat:"",label:"Ingresar",loading:t.loadingFingerPrint}})],1)],1)],1)],1)],1)},r=[],o=n("9523"),i=n.n(o),s=n("c973"),c=n.n(s),l=n("a34a"),u=n.n(l),p=(n("b54a"),n("a481"),n("456d"),n("8a81"),n("d25f"),n("9986"),n("8e6e"),n("e71c")),d=n("2fa3"),g=function(t){return{id:Object(d["f"])("id",t),avatar:Object(d["f"])("avatar",t),code:Object(d["f"])("codigo",t),name:Object(d["f"])("nombre",t),type:Object(d["f"])("tipo",t),active:"Si"===Object(d["f"])("activo",t)}},f=function(t){return{codigo:Object(d["f"])("code",t),password:Object(d["f"])("password",t),tipo:Object(d["f"])("type.id",t)}},b=function(t){return{codigo:t}},m={getViewFormat:g,getApiFormat:f,getFingerPrintFormat:b},v=n("234a");function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={name:"Login",mixins:[v["a"]],data:function(){return{toolbar:!1,loading:!1,loadingFingerPrint:!1,userData:{code:"",password:"",type:null},options:null,isPwd:!0}},methods:{showNotif:function(){this.$q.notify({message:"Por favor coloque el dedo sobre el huellero",icon:"fingerprint",position:"top"})},login:function(){var t=this;return c()(u.a.mark((function e(){var n,a,r,o,i,s;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,m.getApiFormat(t.userData);case 4:return n=e.sent,e.next=7,t.$store.dispatch("auth/login",n);case 7:return a=e.sent,e.next=10,m.getViewFormat(a.data);case 10:r=e.sent,t.$q.localStorage.set(p["n"],r),o=Object(p["u"])(r.type),i=o[0].options[0].link,t.$router.replace(i),t.loading=!1,e.next=23;break;case 18:e.prev=18,e.t0=e["catch"](1),s=e.t0.response.data,t.createNotification(q({message:s},p["b"])),t.loading=!1;case 23:case"end":return e.stop()}}),e,null,[[1,18]])})))()},loginFingerPrint:function(){var t=this;return c()(u.a.mark((function e(){var n,a,r,o,i,s;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingFingerPrint=!0,e.prev=1,e.next=4,m.getFingerPrintFormat(t.userData.code);case 4:return n=e.sent,e.next=7,t.$store.dispatch("auth/loginFingerPrint",n);case 7:return a=e.sent,e.next=10,m.getViewFormat(a.data);case 10:r=e.sent,t.$q.localStorage.set(p["n"],r),o=Object(p["u"])(r.type),i=o[0].options[0].link,t.$router.replace(i),t.loadingFingerPrint=!1,e.next=23;break;case 18:e.prev=18,e.t0=e["catch"](1),s=e.t0.response.data,t.createNotification(q({message:s},p["b"])),t.loadingFingerPrint=!1;case 23:case"end":return e.stop()}}),e,null,[[1,18]])})))()},cancelLoginFingerPrint:function(){this.$store.dispatch("employees/cancelFingerPrint")}},computed:{user:function(){return this.$q.localStorage.getItem(p["n"])}},created:function(){var t=this;return c()(u.a.mark((function e(){return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("ui/getUserTypes");case 2:t.options=e.sent,t.userData.type=t.options?t.options[0]:null;case 4:case"end":return e.stop()}}),e)})))()},beforeRouteEnter:function(t,e,n){n((function(t){if(t.user){var e=Object(p["u"])(t.user.type),a=e[0].options[0].link;n(a)}n()}))}},x=h,y=(n("1139"),n("2877")),O=Object(y["a"])(x,a,r,!1,null,null,null);e["default"]=O.exports},1139:function(t,e,n){"use strict";var a=n("13df"),r=n.n(a);r.a},"13df":function(t,e,n){}}]);